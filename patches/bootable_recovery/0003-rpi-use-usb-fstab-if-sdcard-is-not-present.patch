From 00911e97deae95d9c184f47c50f4e67e563526f6 Mon Sep 17 00:00:00 2001
From: Konsta <konsta09@gmail.com>
Date: Fri, 23 Oct 2020 16:42:50 +0300
Subject: [PATCH 3/3] rpi: use usb fstab if sdcard is not present

* https://github.com/maxwen/android_bootable_recovery/commit/2b7da52c3e052f2c8467372fe243459ab2135082

Change-Id: I2f20106817a342f73a247a53bd524c242d84283a
---
 twrp.cpp | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/twrp.cpp b/twrp.cpp
index 6df37d95..363dd1cd 100755
--- a/twrp.cpp
+++ b/twrp.cpp
@@ -124,6 +124,9 @@ int main(int argc, char **argv) {
 	std::string fstab_filename = "/etc/twrp.fstab";
 	if (!TWFunc::Path_Exists(fstab_filename)) {
 		fstab_filename = "/etc/recovery.fstab";
+		if (!TWFunc::Path_Exists("/dev/block/mmcblk0")) {
+			fstab_filename = "/etc/recovery.usb.fstab";
+		}
 	}
 
 	// Begin SAR detection
-- 
2.17.1

